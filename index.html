<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 ìƒˆí•´ ì„±ìˆ˜ë™ ì •ë³µ: AI & êµ¬ê¸€ë§µ í†µí•© ê°€ì´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #f5f5f4;
            color: #1c1917;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container { height: 350px; }
        }

        .timeline-line::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 1.2rem;
            width: 2px;
            background-color: #e5e7eb;
            z-index: 0;
        }

        .card-hover {
            transition: all 0.2s ease-in-out;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .tab-active { background-color: #1c1917; color: white; }
        .tab-inactive { background-color: white; color: #78716c; }

        .ai-shimmer {
            background: linear-gradient(90deg, #f3f4f6 25%, #e5e7eb 50%, #f3f4f6 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
    <!-- Chosen Palette: 'Stone & Brick' (Seongsu Industrial Vibe) -->
    <!-- Application Structure Plan:
         1. Hero Dashboard: Logistics & AI Packing Assistant.
         2. AI Travel Assistant: Chat interface with Gemini.
         3. Interactive Itinerary: Enhanced with Google Maps Route links.
         4. AI Art & Analytics: Imagery and trip balance charts with restored labels.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="antialiased min-h-screen flex flex-col">

    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-stone-200">
        <div class="max-w-4xl mx-auto px-4 h-14 flex justify-between items-center">
            <div class="font-bold text-lg tracking-tight">
                <span class="text-orange-700">SEONGSU</span> MAP GUIDE
            </div>
            <div class="text-xs font-semibold bg-stone-100 px-3 py-1 rounded-full text-stone-600">
                2026.01.02 - 01.04
            </div>
        </div>
    </nav>

    <main class="flex-grow max-w-4xl mx-auto px-4 py-6 space-y-8 w-full">

        <!-- 1. Hero Summary -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="md:col-span-2 bg-white p-6 rounded-2xl border border-stone-200 shadow-sm flex flex-col justify-between">
                <div>
                    <h2 class="text-xl font-bold mb-4 text-stone-800 flex items-center gap-2">ğŸš„ KTX ìŠ¹ì°¨ ì •ë³´</h2>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-3 bg-stone-50 rounded-xl border border-stone-100">
                            <div>
                                <p class="text-[10px] text-stone-400">1/2 (ê¸ˆ) ë¶€ì‚° â” ì„œìš¸</p>
                                <p class="font-bold">08:15 ì¶œë°œ</p>
                            </div>
                            <div class="text-right">
                                <p class="text-[10px] text-stone-400">9í˜¸ì°¨</p>
                                <p class="font-bold text-orange-700">5A, 5B</p>
                            </div>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-stone-50 rounded-xl border border-stone-100">
                            <div>
                                <p class="text-[10px] text-stone-400">1/4 (ì¼) ì„œìš¸ â” ë¶€ì‚°</p>
                                <p class="font-bold">20:49 ì¶œë°œ</p>
                            </div>
                            <div class="text-right">
                                <p class="text-[10px] text-stone-400">9í˜¸ì°¨</p>
                                <p class="font-bold text-orange-700">7A, 7B</p>
                            </div>
                        </div>
                    </div>
                </div>
                <button onclick="generatePackingList()" class="mt-4 w-full bg-stone-800 text-white py-3 rounded-xl font-bold text-sm hover:bg-stone-700 transition flex items-center justify-center gap-2">
                    âœ¨ AI ì§ ì‹¸ê¸° ì²´í¬ë¦¬ìŠ¤íŠ¸ ìƒì„±
                </button>
            </div>
            
            <div class="space-y-4">
                <div class="bg-blue-600 text-white p-6 rounded-2xl shadow-lg flex flex-col justify-between h-40">
                    <div>
                        <p class="text-xs opacity-80">1ì›” ì´ˆ ì„œìš¸ ë‚ ì”¨</p>
                        <h3 class="text-2xl font-bold mt-1">ğŸ¥¶ í•œíŒŒ ëŒ€ë¹„</h3>
                    </div>
                    <div>
                        <p class="text-sm font-medium">í‰ê·  -6Â°C / 2Â°C</p>
                    </div>
                </div>
                <div class="bg-purple-900 text-white p-4 rounded-2xl shadow-lg h-[calc(10rem-1rem)] flex flex-col justify-center text-center">
                    <p class="text-[10px] uppercase opacity-60">ì—°ê·¹ 'ë¼ì´ì–´' (Day 3)</p>
                    <p class="text-lg font-bold text-purple-200">Aì—´ 7, 8ë²ˆ</p>
                </div>
            </div>
        </section>

        <!-- AI Packing Modal -->
        <div id="packingModal" class="fixed inset-0 bg-black/50 z-[100] hidden flex items-center justify-center p-4">
            <div class="bg-white w-full max-w-md rounded-2xl overflow-hidden shadow-2xl">
                <div class="p-6 border-b border-stone-100 flex justify-between items-center bg-stone-50">
                    <h3 class="font-bold text-stone-800">âœ¨ AI ì¶”ì²œ ì§ ì‹¸ê¸° ë¦¬ìŠ¤íŠ¸</h3>
                    <button onclick="closeModal('packingModal')" class="text-stone-400 hover:text-stone-600">âœ•</button>
                </div>
                <div id="packingContent" class="p-6 max-h-[60vh] overflow-y-auto text-sm leading-relaxed text-stone-600"></div>
            </div>
        </div>

        <!-- 2. AI Travel Assistant -->
        <section class="bg-white rounded-2xl border border-stone-200 shadow-sm overflow-hidden">
            <div class="p-6 border-b border-stone-100 flex items-center justify-between bg-stone-50/50">
                <h2 class="text-lg font-bold text-stone-800 flex items-center gap-2">âœ¨ AI ì—¬í–‰ ë¹„ì„œ (Gemini)</h2>
            </div>
            <div id="chatWindow" class="h-48 overflow-y-auto p-6 space-y-4 text-sm bg-stone-50/30">
                <div class="bg-white p-3 rounded-2xl rounded-tl-none border border-stone-100 shadow-sm max-w-[85%]">
                    ì„±ìˆ˜ë™ ì—¬í–‰ ë™ì„ ì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹ ê°€ìš”?
                </div>
            </div>
            <div class="p-4 border-t border-stone-100 flex gap-2">
                <input type="text" id="chatInput" placeholder="ì„±ìˆ˜ë™ ë§›ì§‘ ì¶”ì²œí•´ì¤˜" class="flex-grow bg-stone-100 border-none rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-orange-500 transition">
                <button onclick="sendMessage()" class="bg-orange-600 text-white p-2 rounded-xl hover:bg-orange-700">ì „ì†¡</button>
            </div>
        </section>

        <!-- 3. Itinerary Timeline with Maps -->
        <section>
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-stone-800">ì—¬í–‰ ë™ì„  ë° ì§€ë„</h2>
                <div class="flex bg-stone-200 p-1 rounded-lg scale-90">
                    <button onclick="switchTab(1)" id="tab-1" class="px-5 py-2 rounded-md text-sm font-bold transition-all shadow-sm tab-active">Day 1</button>
                    <button onclick="switchTab(2)" id="tab-2" class="px-5 py-2 rounded-md text-sm font-bold transition-all text-stone-500 tab-inactive">Day 2</button>
                    <button onclick="switchTab(3)" id="tab-3" class="px-5 py-2 rounded-md text-sm font-bold transition-all text-stone-500 tab-inactive">Day 3</button>
                </div>
            </div>

            <div id="timeline-container" class="bg-white rounded-2xl border border-stone-200 p-6 timeline-line relative min-h-[400px]">
                <!-- Timeline items injected here -->
            </div>
        </section>

        <!-- 4. AI Art & Analytics -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-white rounded-2xl border border-stone-200 p-6 shadow-sm flex flex-col justify-between">
                <div>
                    <h3 class="font-bold text-stone-800 mb-2 flex items-center gap-2">âœ¨ AI ì—¬í–‰ ë¬´ë“œ í¬ìŠ¤í„°</h3>
                    <div id="posterContainer" class="aspect-[3/4] bg-stone-100 rounded-xl overflow-hidden flex items-center justify-center relative">
                        <img id="posterImage" src="" alt="AI Poster" class="w-full h-full object-cover hidden">
                        <p class="text-stone-300 text-xs text-center p-10">ìƒì„± ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”</p>
                    </div>
                </div>
                <button onclick="generatePoster()" class="mt-4 w-full border-2 border-stone-800 text-stone-800 py-3 rounded-xl font-bold text-sm">í¬ìŠ¤í„° ìƒì„±</button>
            </div>

            <div class="bg-stone-900 rounded-2xl p-6 text-white flex flex-col">
                <h3 class="text-center font-bold text-stone-400 uppercase tracking-widest text-[10px] mb-6">Travel Analytics</h3>
                <div class="flex-grow flex flex-col gap-4">
                    <!-- Radar Chart Container -->
                    <div class="chart-container flex-grow">
                        <canvas id="balanceChart"></canvas>
                    </div>
                    <!-- Doughnut Chart Container -->
                    <div class="chart-container flex-grow">
                        <canvas id="timeChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-stone-100 border-t border-stone-200 py-10 text-center mt-12">
        <p class="text-sm text-stone-500 font-bold tracking-tight">2026 SEONGSU MISSION</p>
    </footer>

    <script>
        const apiKey = "";
        const textModel = "gemini-2.5-flash-preview-09-2025";
        const imageModel = "imagen-4.0-generate-001";

        async function callGeminiText(prompt, systemInstruction = "") {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/${textModel}:generateContent?key=${apiKey}`;
            const payload = { contents: [{ parts: [{ text: prompt }] }], systemInstruction: { parts: [{ text: systemInstruction }] } };
            const response = await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            const data = await response.json();
            return data.candidates?.[0]?.content?.parts?.[0]?.text || "ì˜¤ë¥˜ ë°œìƒ";
        }

        async function callImagen(prompt) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/${imageModel}:predict?key=${apiKey}`;
            const payload = { instances: [{ prompt: prompt }], parameters: { sampleCount: 1 } };
            const response = await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            const data = await response.json();
            return data.predictions ? `data:image/png;base64,${data.predictions[0].bytesBase64Encoded}` : null;
        }

        // --- MAP DATA ---
        const tripData = {
            1: [
                { time: "11:19", title: "ì„œìš¸ì—­ ë„ì°©", desc: "ë„ë³´ 16ë¶„ ì´ë™", cat: "move", map: "https://www.google.com/maps/search/ì„œìš¸ì—­" },
                { time: "11:41", title: "ì„œì†Œë¬¸ì„±ì§€ ì—­ì‚¬ë°•ë¬¼ê´€", desc: "ê±´ì¶• ì „ì‹œ ê´€ëŒ", cat: "play", map: "https://www.google.com/maps/search/ì„œì†Œë¬¸ì„±ì§€ì—­ì‚¬ë°•ë¬¼ê´€" },
                { time: "12:41", title: "ì„±ìˆ˜ë™ ì´ë™", desc: "ì§€í•˜ì²  2í˜¸ì„  ì´ìš©", cat: "move", map: "https://www.google.com/maps/dir/ì„œì†Œë¬¸ì„±ì§€ì—­ì‚¬ë°•ë¬¼ê´€/ì„±ìˆ˜ì—­" },
                { time: "13:30", title: "ì œìŠ¤í‹°ì‚´ë£¬ ì„±ìˆ˜", desc: "ì ì‹¬ ì‹ì‚¬", cat: "food", map: "https://www.google.com/maps/search/ì œìŠ¤í‹°ì‚´ë£¬+ì„±ìˆ˜" },
                { time: "15:00", title: "ë¡œìš°í‚¤ (Lowkey)", desc: "ë“œë¦½ ì»¤í”¼", cat: "food", map: "https://www.google.com/maps/search/ë¡œìš°í‚¤+ì„±ìˆ˜" },
                { time: "16:30", title: "ì—°ë¬´ì¥ê¸¸ íŒì—… íˆ¬ì–´", desc: "ë¬´ì‹ ì‚¬, ì´êµ¬ì„±ìˆ˜ ë“±", cat: "shop", map: "https://www.google.com/maps/search/ì„±ìˆ˜ë™+ì—°ë¬´ì¥ê¸¸" },
                { time: "18:00", title: "ë””ì˜¬ & íƒ¬ë²„ë¦°ì¦ˆ", desc: "ë¸Œëœë“œ ê³µê°„ ì²´í—˜", cat: "shop", map: "https://www.google.com/maps/search/ë””ì˜¬+ì„±ìˆ˜" },
                { time: "19:30", title: "ì†Œë¬¸ë‚œ ì„±ìˆ˜ ê°ìíƒ•", desc: "ì €ë… ì‹ì‚¬", cat: "food", map: "https://www.google.com/maps/search/ì†Œë¬¸ë‚œ+ì„±ìˆ˜+ê°ìíƒ•" },
                { time: "21:00", title: "ê±´ëŒ€ ì ë‘", desc: "ìˆ™ì†Œ ì²´í¬ì¸", cat: "move", map: "https://www.google.com/maps/search/ì„œìš¸+ì„±ë™êµ¬+ë™ì¼ë¡œ+219" }
            ],
            2: [
                { time: "11:00", title: "í• ë¨¸ë‹ˆì˜ ë ˆì‹œí”¼", desc: "ì•„ì  ì‹ì‚¬", cat: "food", map: "https://www.google.com/maps/search/í• ë¨¸ë‹ˆì˜ë ˆì‹œí”¼" },
                { time: "12:30", title: "ë””ë®¤ì§€ì—„", desc: "ì „ì‹œ ê´€ëŒ", cat: "play", map: "https://www.google.com/maps/search/ë””ë®¤ì§€ì—„" },
                { time: "15:00", title: "í”¼ì¹˜ìŠ¤ ë„ì›", desc: "ìë™ì°¨ í…Œë§ˆ ê³µê°„", cat: "play", map: "https://www.google.com/maps/search/í”¼ì¹˜ìŠ¤+ë„ì›" },
                { time: "17:00", title: "EQL ì„±ìˆ˜", desc: "í¸ì§‘ìƒµ íˆ¬ì–´", cat: "shop", map: "https://www.google.com/maps/search/EQL+GROVE+ì„±ìˆ˜" },
                { time: "18:30", title: "ì„±ìˆ˜ëª…ë‹¹", desc: "ìš”ë¦¬ ì£¼ì ", cat: "food", map: "https://www.google.com/maps/search/ì„±ìˆ˜ëª…ë‹¹" },
                { time: "21:00", title: "ìŠ¤íŒŒë ‰ìŠ¤ ë™ë¬˜", desc: "ì°œì§ˆë°© ì´ë™", cat: "move", map: "https://www.google.com/maps/search/ìŠ¤íŒŒë ‰ìŠ¤+ë™ë¬˜" }
            ],
            3: [
                { time: "11:00", title: "ì—°ê·¹ 'ë¼ì´ì–´'", desc: "ìƒëª…ì•„íŠ¸í™€", cat: "play", map: "https://www.google.com/maps/search/ìƒëª…ì•„íŠ¸í™€" },
                { time: "13:00", title: "ì •ëˆ ë³¸ì ", desc: "ëˆì¹´ì¸  ì ì‹¬", cat: "food", map: "https://www.google.com/maps/search/ì •ëˆ+ë³¸ì " },
                { time: "15:00", title: "ìµì„ ë™ í•œì˜¥ë§ˆì„", desc: "ì‚°ì±… ë° êµ¬ê²½", cat: "shop", map: "https://www.google.com/maps/search/ìµì„ ë™+í•œì˜¥ë§ˆì„" },
                { time: "16:30", title: "ìµì„ ë™ ì¹´í˜", desc: "ì†Œí•˜ì—¼ì „/ì²­ìˆ˜ë‹¹", cat: "food", map: "https://www.google.com/maps/search/ì²­ìˆ˜ë‹¹+ìµì„ " },
                { time: "20:49", title: "ì„œìš¸ì—­ ì¶œë°œ", desc: "ë¶€ì‚°í–‰ ê·€ê°€", cat: "move", map: "https://www.google.com/maps/search/ì„œìš¸ì—­" }
            ]
        };

        const icons = { food: "ğŸ½ï¸", play: "ğŸ¨", shop: "ğŸ›ï¸", move: "ğŸš•" };

        function renderTimeline(day) {
            const container = document.getElementById('timeline-container');
            container.innerHTML = '';
            tripData[day].forEach(item => {
                const div = document.createElement('div');
                div.className = "relative pl-8 pb-8 last:pb-0";
                div.innerHTML = `
                    <div class="absolute left-2 top-0 w-4 h-4 rounded-full border-2 border-white shadow-sm -translate-x-1/2 mt-1.5 bg-orange-600 z-10"></div>
                    <div class="bg-stone-50 border border-stone-200 rounded-xl p-4 card-hover flex justify-between items-center cursor-pointer" onclick="window.open('${item.map}', '_blank')">
                        <div>
                            <span class="text-[10px] font-bold text-stone-400">${icons[item.cat]} ${item.time}</span>
                            <h3 class="font-bold text-stone-800 text-base leading-tight mt-1">${item.title}</h3>
                            <p class="text-xs text-stone-600 mt-1">${item.desc}</p>
                        </div>
                        <div class="text-stone-300 text-xs font-bold">MAP â†—</div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function switchTab(day) {
            [1, 2, 3].forEach(d => {
                const btn = document.getElementById(`tab-${d}`);
                btn.className = d === day ? "px-5 py-2 rounded-md text-sm font-bold transition-all shadow-sm tab-active" : "px-5 py-2 rounded-md text-sm font-bold transition-all text-stone-500 tab-inactive";
            });
            renderTimeline(day);
        }

        async function generatePackingList() {
            const modal = document.getElementById('packingModal');
            const content = document.getElementById('packingContent');
            modal.classList.remove('hidden');
            content.innerHTML = '<p class="text-center py-10 ai-shimmer h-20 w-full rounded-xl">AIê°€ ë¶„ì„ ì¤‘...</p>';
            const res = await callGeminiText("ì„±ìˆ˜ë™ 2ë°• 3ì¼ ê²¨ìš¸ ì—¬í–‰ì— í•„ìš”í•œ ìŠ¤ë§ˆíŠ¸í•œ ì§ ì‹¸ê¸° ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆë ›í¬ì¸íŠ¸ë¡œ ì‘ì„±í•´ì¤˜.");
            content.innerHTML = `<div class="prose prose-sm">${res.replace(/\n/g, '<br>')}</div>`;
        }

        function closeModal(id) { document.getElementById(id).classList.add('hidden'); }

        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const chat = document.getElementById('chatWindow');
            if (!input.value) return;
            const userMsg = document.createElement('div');
            userMsg.className = "bg-orange-600 text-white p-3 rounded-2xl rounded-tr-none self-end ml-auto max-w-[85%]";
            userMsg.innerText = input.value;
            chat.appendChild(userMsg);
            const res = await callGeminiText(input.value, "ì„±ìˆ˜ë™ ì—¬í–‰ ê°€ì´ë“œì…ë‹ˆë‹¤.");
            const aiMsg = document.createElement('div');
            aiMsg.className = "bg-white p-3 rounded-2xl rounded-tl-none border border-stone-100 shadow-sm max-w-[85%]";
            aiMsg.innerText = res;
            chat.appendChild(aiMsg);
            input.value = '';
            chat.scrollTop = chat.scrollHeight;
        }

        async function generatePoster() {
            const img = document.getElementById('posterImage');
            img.classList.add('ai-shimmer');
            const res = await callImagen("Minimalist travel poster for Seongsu-dong, Seoul, winter, industrial red brick aesthetic, modern art.");
            if (res) {
                img.src = res;
                img.classList.remove('hidden', 'ai-shimmer');
                img.nextElementSibling.classList.add('hidden');
            }
        }

        function initCharts() {
            // Radar Chart with Labels Enabled
            new Chart(document.getElementById('balanceChart'), {
                type: 'radar',
                data: { 
                    labels: ['ë§›ì§‘', 'ì „ì‹œ', 'ì‡¼í•‘', 'ê°ì„±', 'ì´ë™'], 
                    datasets: [{ 
                        label: 'ë§Œì¡±ë„ ì§€ìˆ˜',
                        data: [9, 8, 8.5, 9, 6], 
                        backgroundColor: 'rgba(234, 88, 12, 0.2)', 
                        borderColor: 'rgb(234, 88, 12)',
                        pointBackgroundColor: 'rgb(234, 88, 12)',
                        pointBorderColor: '#fff',
                    }] 
                },
                options: { 
                    maintainAspectRatio: false, 
                    scales: { 
                        r: { 
                            angleLines: { color: 'rgba(255,255,255,0.1)' },
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            pointLabels: { 
                                display: true, 
                                color: '#a8a29e', 
                                font: { size: 12, family: 'Pretendard' } 
                            },
                            ticks: { display: false }
                        } 
                    }, 
                    plugins: { 
                        legend: { display: false } 
                    } 
                }
            });

            // Doughnut Chart with White Labels for Dark Background
            new Chart(document.getElementById('timeChart'), {
                type: 'doughnut',
                data: { 
                    labels: ['ì‹¤ë‚´', 'ì‹ì‚¬', 'ì´ë™'], 
                    datasets: [{ 
                        data: [50, 30, 20], 
                        backgroundColor: ['#4f46e5', '#f97316', '#a8a29e'],
                        borderWidth: 0
                    }] 
                },
                options: { 
                    maintainAspectRatio: false, 
                    plugins: { 
                        legend: { 
                            position: 'bottom', 
                            labels: { 
                                color: '#ffffff', 
                                font: { size: 11, family: 'Pretendard' },
                                padding: 20
                            } 
                        } 
                    } 
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => { renderTimeline(1); initCharts(); });
    </script>
</body>
</html>